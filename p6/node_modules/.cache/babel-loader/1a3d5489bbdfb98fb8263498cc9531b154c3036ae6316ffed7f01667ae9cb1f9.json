{"ast":null,"code":"var _jsxFileName = \"/Users/waizinlinn/Desktop/Spring/React/HW/hw6/hw6-waizin28/src/components/content/BadgerMessage.js\",\n  _s = $RefreshSig$();\nimport React from \"react\";\nimport { Button } from \"react-bootstrap\";\nimport { useContext, useEffect, useState } from \"react\";\nimport privateIdContext from \"../../contexts/privateIdContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction BadgerMessage(props) {\n  _s();\n  const dt = new Date(props.created);\n  const {\n    privateId,\n    setPrivateId\n  } = useContext(privateIdContext);\n  const [userName, setUserName] = useState(\"\");\n  const deletePost = () => {\n    fetch(`https://cs571.org/s23/hw6/api/chatroom/${props.name}/messages/${props.id}`, {\n      headers: {\n        \"X-CS571-ID\": \"bid_d5f87cfbd68cea89ba78\",\n        \"Content-Type\": \"application/json\"\n      },\n      method: \"DELETE\",\n      credentials: \"include\"\n    }).then(res => {\n      if (res.status === 200) {\n        alert(\"Successfully deleted the post!\");\n      }\n      return res.json();\n    }).then(data => {\n      setPrivateId(privateId.filter(pID => pID !== props.id));\n      props.loadMessages();\n    });\n  };\n  fetch(\"https://cs571.org/s23/hw6/api/whoami\", {\n    headers: {\n      \"X-CS571-ID\": \"bid_d5f87cfbd68cea89ba78\"\n    },\n    credentials: \"include\"\n  }).then(res => {\n    res.json().then(data => {\n      if (res.status === 200) {\n        setUserName(JSON.stringify(data[\"user\"][\"username\"]));\n      } else {\n        setUserName(\"\");\n      }\n    });\n  });\n  console.log(\"UserName testing \" + userName);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: props.title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"sub\", {\n      children: [\"Posted on \", dt.toLocaleDateString(), \" at \", dt.toLocaleTimeString()]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n      children: props.poster\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: props.content\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this), JSON.stringify(privateId).includes(props.id) ? /*#__PURE__*/_jsxDEV(Button, {\n      variant: \"danger\",\n      type: \"submit\",\n      onClick: deletePost,\n      children: \"Delete Post\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }, this) : null]\n  }, void 0, true);\n}\n_s(BadgerMessage, \"Vv0MSsnqWkAnEX5m54hWfJllsiE=\");\n_c = BadgerMessage;\nexport default BadgerMessage;\nvar _c;\n$RefreshReg$(_c, \"BadgerMessage\");","map":{"version":3,"names":["React","Button","useContext","useEffect","useState","privateIdContext","jsxDEV","_jsxDEV","Fragment","_Fragment","BadgerMessage","props","_s","dt","Date","created","privateId","setPrivateId","userName","setUserName","deletePost","fetch","name","id","headers","method","credentials","then","res","status","alert","json","data","filter","pID","loadMessages","JSON","stringify","console","log","children","title","fileName","_jsxFileName","lineNumber","columnNumber","toLocaleDateString","toLocaleTimeString","poster","content","includes","variant","type","onClick","_c","$RefreshReg$"],"sources":["/Users/waizinlinn/Desktop/Spring/React/HW/hw6/hw6-waizin28/src/components/content/BadgerMessage.js"],"sourcesContent":["import React from \"react\";\nimport { Button } from \"react-bootstrap\";\nimport { useContext, useEffect, useState } from \"react\";\nimport privateIdContext from \"../../contexts/privateIdContext\";\n\nfunction BadgerMessage(props) {\n  const dt = new Date(props.created);\n  const { privateId, setPrivateId } = useContext(privateIdContext);\n  const [userName, setUserName] = useState(\"\");\n\n  const deletePost = () => {\n    fetch(\n      `https://cs571.org/s23/hw6/api/chatroom/${props.name}/messages/${props.id}`,\n      {\n        headers: {\n          \"X-CS571-ID\": \"bid_d5f87cfbd68cea89ba78\",\n          \"Content-Type\": \"application/json\",\n        },\n        method: \"DELETE\",\n        credentials: \"include\",\n      }\n    )\n      .then((res) => {\n        if (res.status === 200) {\n          alert(\"Successfully deleted the post!\");\n        }\n        return res.json();\n      })\n      .then((data) => {\n        setPrivateId(privateId.filter((pID) => pID !== props.id));\n        props.loadMessages();\n      });\n  };\n\n  fetch(\"https://cs571.org/s23/hw6/api/whoami\", {\n    headers: {\n      \"X-CS571-ID\": \"bid_d5f87cfbd68cea89ba78\",\n    },\n    credentials: \"include\",\n  }).then((res) => {\n    res.json().then((data) => {\n      if (res.status === 200) {\n        setUserName(JSON.stringify(data[\"user\"][\"username\"]));\n      } else {\n        setUserName(\"\");\n      }\n    });\n  });\n\n  console.log(\"UserName testing \" + userName);\n\n  return (\n    <>\n      <h2>{props.title}</h2>\n      <sub>\n        Posted on {dt.toLocaleDateString()} at {dt.toLocaleTimeString()}\n      </sub>\n      <br />\n      <br />\n      <i>{props.poster}</i>\n      <p>{props.content}</p>\n      {JSON.stringify(privateId).includes(props.id) ? (\n        <Button variant=\"danger\" type=\"submit\" onClick={deletePost}>\n          Delete Post\n        </Button>\n      ) : null}\n    </>\n  );\n}\n\nexport default BadgerMessage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}