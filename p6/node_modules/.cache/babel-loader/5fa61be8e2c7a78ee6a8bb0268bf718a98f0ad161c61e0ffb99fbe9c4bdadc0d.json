{"ast":null,"code":"var _jsxFileName = \"/Users/waizinlinn/Desktop/Spring/React/HW/hw6/hw6-waizin28/src/components/content/BadgerMessage.js\",\n  _s = $RefreshSig$();\nimport React from \"react\";\nimport { Button } from \"react-bootstrap\";\nimport { useContext } from \"react\";\nimport privateIdContext from \"../../contexts/privateIdContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction BadgerMessage(props) {\n  _s();\n  const dt = new Date(props.created);\n  const {\n    privateId,\n    setPrivateId\n  } = useContext(privateIdContext);\n  const [userName, setUserName] = useState(\"\");\n  const deletePost = () => {\n    fetch(`https://cs571.org/s23/hw6/api/chatroom/${props.name}/messages/${props.id}`, {\n      headers: {\n        \"X-CS571-ID\": \"bid_d5f87cfbd68cea89ba78\",\n        \"Content-Type\": \"application/json\"\n      },\n      method: \"DELETE\",\n      credentials: \"include\"\n    }).then(res => {\n      if (res.status === 200) {\n        alert(\"Successfully deleted the post!\");\n      }\n      return res.json();\n    }).then(data => {\n      setPrivateId(privateId.filter(pID => pID !== props.id));\n      props.loadMessages();\n    });\n  };\n  useEffect(() => {\n    fetch(\"https://cs571.org/s23/hw6/api/whoami\", {\n      headers: {\n        \"X-CS571-ID\": \"bid_d5f87cfbd68cea89ba78\"\n      },\n      credentials: \"include\"\n    }).then(res => {\n      console.log(\"Res Message \" + res.json().messages);\n      if (res.status === 200) {\n        setUserName(\"temp\");\n      } else {\n        setUserName(\"\");\n      }\n      return res.json();\n    });\n  }, [setUserName, userName]);\n  console.log(\"UserName printed\" + userName);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: props.title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"sub\", {\n      children: [\"Posted on \", dt.toLocaleDateString(), \" at \", dt.toLocaleTimeString()]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n      children: props.poster\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: props.content\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this), JSON.stringify(privateId).includes(props.id) ? /*#__PURE__*/_jsxDEV(Button, {\n      variant: \"danger\",\n      type: \"submit\",\n      onClick: deletePost,\n      children: \"Delete Post\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }, this) : null]\n  }, void 0, true);\n}\n_s(BadgerMessage, \"ZsWdUxdABflZ6AFN7u4k7mD72cA=\");\n_c = BadgerMessage;\nexport default BadgerMessage;\nvar _c;\n$RefreshReg$(_c, \"BadgerMessage\");","map":{"version":3,"names":["React","Button","useContext","privateIdContext","jsxDEV","_jsxDEV","Fragment","_Fragment","BadgerMessage","props","_s","dt","Date","created","privateId","setPrivateId","userName","setUserName","useState","deletePost","fetch","name","id","headers","method","credentials","then","res","status","alert","json","data","filter","pID","loadMessages","useEffect","console","log","messages","children","title","fileName","_jsxFileName","lineNumber","columnNumber","toLocaleDateString","toLocaleTimeString","poster","content","JSON","stringify","includes","variant","type","onClick","_c","$RefreshReg$"],"sources":["/Users/waizinlinn/Desktop/Spring/React/HW/hw6/hw6-waizin28/src/components/content/BadgerMessage.js"],"sourcesContent":["import React from \"react\";\nimport { Button } from \"react-bootstrap\";\nimport { useContext } from \"react\";\nimport privateIdContext from \"../../contexts/privateIdContext\";\n\nfunction BadgerMessage(props) {\n  const dt = new Date(props.created);\n  const { privateId, setPrivateId } = useContext(privateIdContext);\n  const [userName, setUserName] = useState(\"\");\n\n  const deletePost = () => {\n    fetch(\n      `https://cs571.org/s23/hw6/api/chatroom/${props.name}/messages/${props.id}`,\n      {\n        headers: {\n          \"X-CS571-ID\": \"bid_d5f87cfbd68cea89ba78\",\n          \"Content-Type\": \"application/json\",\n        },\n        method: \"DELETE\",\n        credentials: \"include\",\n      }\n    )\n      .then((res) => {\n        if (res.status === 200) {\n          alert(\"Successfully deleted the post!\");\n        }\n        return res.json();\n      })\n      .then((data) => {\n        setPrivateId(privateId.filter((pID) => pID !== props.id));\n        props.loadMessages();\n      });\n  };\n\n  useEffect(() => {\n    fetch(\"https://cs571.org/s23/hw6/api/whoami\", {\n      headers: {\n        \"X-CS571-ID\": \"bid_d5f87cfbd68cea89ba78\",\n      },\n      credentials: \"include\",\n    }).then((res) => {\n      console.log(\"Res Message \" + res.json().messages);\n      if (res.status === 200) {\n        setUserName(\"temp\");\n      } else {\n        setUserName(\"\");\n      }\n      return res.json();\n    });\n  }, [setUserName, userName]);\n\n  console.log(\"UserName printed\" + userName);\n\n  return (\n    <>\n      <h2>{props.title}</h2>\n      <sub>\n        Posted on {dt.toLocaleDateString()} at {dt.toLocaleTimeString()}\n      </sub>\n      <br />\n      <br />\n      <i>{props.poster}</i>\n      <p>{props.content}</p>\n      {JSON.stringify(privateId).includes(props.id) ? (\n        <Button variant=\"danger\" type=\"submit\" onClick={deletePost}>\n          Delete Post\n        </Button>\n      ) : null}\n    </>\n  );\n}\n\nexport default BadgerMessage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}